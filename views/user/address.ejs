<%- include("../../views/layout/user/header",{user:user}) %>

<html>
<head>
    <title>Manage Address</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        /* Global styles */
body {
    font-family: Arial, sans-serif;
    background-color: #f5f5f5;
    margin: 0;
    padding: 0;
}
.content {
    flex: 1;
    background-color: #ffffff;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center; /* Centers the content horizontally */
    justify-content: center; /* Centers the content vertically */
    text-align: center;
}
.address-section .address-card {
    width: 100%; /* Take full width inside the container */
    max-width: 400px; /* Optional: set a max width */
    background-color: #e0e7ff;
    border-radius: 8px;
    padding: 20px;
    text-align: left;
}

/* Sidebar and header styles */
.container2 {
    display: flex;
    padding: 20px;
}

.sidebar {
    width: 250px; /* Fixed width */
    height:500px;
    background-color: #ffffff;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    padding: 20px;
    margin-right: 20px;
    overflow: hidden; /* Prevents content overflow */
    box-sizing: border-box; /* Ensures padding doesn’t affect width */
}

.sidebar-header {
    background-color: #3f51b5;
    color: #ffffff;
    padding: 20px;
    border-radius: 8px 8px 0 0;
    text-align: center;
}

.sidebar-menu {
    list-style: none;
    padding: 0;
    margin: 0;
}

.sidebar-menu li {
    padding: 15px 20px;
    display: flex;
    align-items: center;
    cursor: pointer;
    white-space: nowrap; /* Prevents text from wrapping */
    overflow: hidden;
    text-overflow: ellipsis; /* Adds ellipsis (...) if text is too long */
}

.sidebar-menu li:hover,
.sidebar-menu li.active {
    background-color: #e0e0e0;
    border-radius: 8px;
}

.sidebar-menu li i {
    margin-right: 10px;
}


/* Specific styles for address-section */
.address-section .content {
    flex: 1;
    background-color: #ffffff;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    padding: 20px;
}

/* .address-section .address-container {
    display: flex;
    gap: 20px;
    flex-direction: column;
} */
.address-section .address-container {
    display: flex;
    flex-direction: column;
    align-items: center; /* Centers the address cards */
    justify-content: center;
    gap: 20px;
    width: 100%; /* Adjust width if necessary */
}

.address-section .add-address, .address-section .address-card {
    flex: 1;
    border: 2px dashed #ccc;
    border-radius: 8px;
    padding: 20px;
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.address-section .add-address:hover {
    background-color: #f0f0f0;
}

.address-section .address-card {
    border: none;
    background-color: #e0e7ff;
    text-align: left;
}

.address-section .address-card p {
    margin: 5px 0;
}

.address-section .address-card .buttons {
    display: flex;
    gap: 10px;
    margin-top: 10px;
}

.address-section .address-card .buttons button {
    padding: 5px 10px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.address-section .address-card .buttons .default {
    background-color: #4caf50;
    color: #ffffff;
}

/* Modal styles */
.modal {
    display: none; /* Hidden by default */
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.5); /* Black background with opacity */
}
.modal-content {
    background-color: #ffffff;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 40%;
    border-radius: 8px;
}


.sidebar-header {
    width: 100%; /* Set the card width to 100% of the parent container */
    padding: 20px;
    box-sizing: border-box;
    overflow: hidden; /* Prevent content from overflowing */
}

.sidebar-header h2 {
    font-size: 24px;
    white-space: nowrap; /* Prevent wrapping */
    overflow: hidden; /* Hide overflow */
    text-overflow: ellipsis; /* Add "..." if the text overflows */
}

.sidebar-header p {
    font-size: 16px;
    white-space: nowrap; /* Prevent wrapping */
    overflow: hidden; /* Hide overflow */
    text-overflow: ellipsis; /* Add "..." if the text overflows */
}

.card {
    width: 400px; /* Increase the width of the card */
    max-width: 100%; /* Ensure the card doesn't exceed the container width */
    margin: 0 auto; /* Center the card */
    padding: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}






    </style>
</head>
<body>
    <div class="container2">
        <div class="sidebar">
            <div class="sidebar-header">
                <h2><%=user.username%></h2>
                <p><%=user.email%></p>
            </div>
            <ul class="sidebar-menu">
                <li><i class="fas fa-box"></i> Orders & Returns</li>
                <li><i class="fas fa-user"></i> My Profile</li>
                <li><i class="fas fa-wallet"></i> Wallet <span style="margin-left:auto;">₹ 0</span></li>
                <li><i class="fas fa-trophy"></i> Sporty Rewards</li>
                <li class="active"><i class="fas fa-map-marker-alt"></i> Address</li>
                <li><i class="fas fa-power-off"></i> Logout</li>
            </ul>
        </div>
        <div class="content  address-section">
            <h2>Your Address</h2>
            <div class="address-container">
                
                <a href="/addressSave" class="add-address">
                    <i class="fas fa-plus" style="font-size: 24px;"></i>
                    <p>Add New Address</p>
                </a>
               
                  

            <!--address card-->

            <% if (user.addresses && user.addresses.length > 0) { %>
                <% user.addresses.forEach(function(address, index) { %>
                  <div class="address-card">
                      <p><strong><%= address.address_type %></strong></p> <!-- Address type: Home/Work -->
                      <p><%= address.name %></p>
                      <p><%= address.address %>, <%= address.locality %>, <%= address.city %>, <%= address.state %>, <%= address.pincode %></p>
                      <p>Phone: <strong><%= address.mobile %></strong></p>
                      <div class="buttons">
                        <a href="/editaddress/<%= address._id %>">
                            <button>Edit</button>
                        </a>
                          <button>Delete</button>
                          <button class="default">
                            <% if (user.defaultAddress === index) { %>
                              Default Address
                            <% } else { %>
                              Set as Default
                            <% } %>
                          </button>
                      </div>
                  </div>
                <% }); %>
              <% } else { %>
                  <p>No addresses found.</p>
              <% } %>
              

            <!--address card end-->



            </div>
        </div>
    </div>
</body>


<div id="addressModal" class="modal">
    <div class="modal-content">
        <h2>Add New Address</h2>
        <div class="form-group">
            <label for="name">Full Name</label>
            <input type="text" id="name" placeholder="Enter your name">
        </div>
        <div class="form-group">
            <label for="address">Address</label>
            <input type="text" id="address" placeholder="Enter your address">
        </div>
        <div class="form-group">
            <label for="phone">Phone Number</label>
            <input type="text" id="phone" placeholder="Enter your phone number">
        </div>
        <div class="form-group">
            <label for="city">City</label>
            <input type="text" id="city" placeholder="Enter your city">
        </div>
        <div class="form-group">
            <label for="state">State</label>
            <input type="text" id="state" placeholder="Enter your state">
        </div>
        <div class="form-group">
            <label for="zipcode">Zipcode</label>
            <input type="text" id="zipcode" placeholder="Enter your zipcode">
        </div>
        <div class="buttons">
            <button class="save-btn" onclick="saveAddress()">Save</button>
            <button class="cancel-btn" onclick="closeModal()">Cancel</button>
        </div>
    </div>
</div>


<script>
    function openModal(){
        document.getElementById("addressModal").style.display="block"
    }
    function closeModal(){
        document.getElementById("addressModal").style.display="none"
    }

    function saveAddress() {
        
        const name = document.getElementById('name').value;
        const address = document.getElementById('address').value;
        const phone = document.getElementById('phone').value;
        const city = document.getElementById('city').value;
        const state = document.getElementById('state').value;
        const zipcode = document.getElementById('zipcode').value;

        console.log("Name:", name);
        console.log("Address:", address);
        console.log("Phone:", phone);
        console.log("City:", city);
        console.log("State:", state);
        console.log("Zipcode:", zipcode);

        closeModal();
    }

</script>






</html>
<%- include("../../views/layout/user/footer") %>